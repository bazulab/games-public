"use strict";(self.webpackChunkgames=self.webpackChunkgames||[]).push([[402],{7402:(O,m,a)=>{a.r(m),a.d(m,{WordleComponent:()=>I});var l=a(6825),h=a(6814),g=a(8645),_=a(9773),o=(()=>((o=o||{})[o.Unknown=0]="Unknown",o[o.IncorrectLetter=1]="IncorrectLetter",o[o.CorrectLetter=2]="CorrectLetter",o[o.CorrectLetterAndPosition=3]="CorrectLetterAndPosition",o))(),i=(()=>((i=i||{})[i.Active=0]="Active",i[i.Defeat=1]="Defeat",i[i.Victory=2]="Victory",i))(),t=a(9291);let f=(()=>{class r{constructor(){this.dictionary=[],this.rowsNumber=0,this.columnsNumber=1,this.cells=[],this.currentRowIndex=0,this.currentColumnIndex=0,this.gameStatus=i.Active,this.secretWord="",this.usedWords=[],this.cellsSubject=new g.x,this.gameStatusSubject=new g.x}get cells$(){return this.cellsSubject.asObservable()}get gameStatus$(){return this.gameStatusSubject.asObservable()}reset({dictionary:e,columnsNumber:s,rowsNumber:u}){this.dictionary=e,this.columnsNumber=s,this.rowsNumber=u,this.secretWord=this.dictionary[Math.floor(Math.random()*this.dictionary.length)],this.cells=[];for(let n=0;n<this.rowsNumber;n++){const d=[];for(let p=0;p<this.columnsNumber;p++)d.push({status:o.Unknown});this.cells.push(d)}this.currentRowIndex=0,this.currentColumnIndex=0,this.usedWords=[],this.cellsSubject.next(this.cells),this.gameStatus=i.Active,this.gameStatusSubject.next(this.gameStatus)}typeLetter(e){return this.gameStatus===i.Active&&this.currentColumnIndex!==this.columnsNumber&&(this.cells[this.currentRowIndex][this.currentColumnIndex].value=e,this.currentColumnIndex++,this.cellsSubject.next(this.cells),!0)}removeLetter(){return this.gameStatus===i.Active&&0!==this.currentColumnIndex&&(this.currentColumnIndex--,this.cells[this.currentRowIndex][this.currentColumnIndex].value="",this.cellsSubject.next(this.cells),!0)}submitWord(){if(this.gameStatus!==i.Active||this.currentColumnIndex!==this.columnsNumber)return!1;const e=this.cells[this.currentRowIndex],s=e.map(n=>n.value).join("");if(s===this.secretWord){for(let n=0;n<this.columnsNumber;n++)e[n].status=o.CorrectLetterAndPosition;return this.cellsSubject.next(this.cells),this.gameStatus=i.Victory,this.gameStatusSubject.next(this.gameStatus),!0}if(!this.dictionary.includes(s)||this.usedWords.includes(s))return!1;const u=this.secretWord.split("");for(let n=0;n<this.columnsNumber;n++){const d=e[n].value||"";e[n].status=u.includes(d)?d===u[n]?o.CorrectLetterAndPosition:o.CorrectLetter:o.IncorrectLetter}return this.cellsSubject.next(this.cells),this.currentRowIndex++,this.currentColumnIndex=0,this.usedWords.push(s),this.currentRowIndex===this.rowsNumber&&(this.gameStatus=i.Defeat,this.gameStatusSubject.next(this.gameStatus)),!0}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();var S=a(9862);const x=function(r,c,e){return{"grid__cell--incorrect-letter":r,"grid__cell--correct-letter":c,"grid__cell--correct-letter-and-position":e}};function C(r,c){if(1&r&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&r){const e=c.$implicit,s=t.oxw(2);t.Q6J("ngClass",t.kEZ(2,x,e.status===s.CellStatus.IncorrectLetter,e.status===s.CellStatus.CorrectLetter,e.status===s.CellStatus.CorrectLetterAndPosition)),t.xp6(1),t.hij(" ",e.value," ")}}function v(r,c){if(1&r&&(t.TgZ(0,"div",3),t.YNc(1,C,2,6,"div",4),t.qZA()),2&r){const e=c.$implicit,s=t.oxw();t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",s.trackByIndex)}}function y(r,c){1&r&&(t.TgZ(0,"span",8),t._uU(1,"Victory!"),t.qZA())}function b(r,c){1&r&&(t.TgZ(0,"span",9),t._uU(1,"Defeat"),t.qZA())}function w(r,c){if(1&r&&(t.ynx(0),t.YNc(1,y,2,0,"span",6),t.YNc(2,b,2,0,"span",7),t.BQk()),2&r){const e=c.ngIf,s=t.oxw();t.xp6(1),t.Q6J("ngIf",e===s.GameStatus.Victory),t.xp6(1),t.Q6J("ngIf",e===s.GameStatus.Defeat)}}let I=(()=>{class r{handleKeyboardEvent(e){switch(e.key){case"Enter":this.isOperationSuccessful=this.wordleService.submitWord();break;case"Backspace":this.isOperationSuccessful=this.wordleService.removeLetter();break;default:e.code.startsWith("Key")&&(this.isOperationSuccessful=this.wordleService.typeLetter(e.key))}}constructor(e,s){this.httpClient=e,this.wordleService=s,this.CellStatus=o,this.GameStatus=i,this.columnsNumber=5,this.rowsNumber=6,this.isOperationSuccessful=!0,this.cells$=this.wordleService.cells$,this.gameStatus$=this.wordleService.gameStatus$,this.tearDown$=new g.x}ngOnInit(){this.resetGame()}ngOnDestroy(){this.tearDown$.next(),this.tearDown$.complete()}trackByIndex(e){return e}resetOperationStatus(){this.isOperationSuccessful=!0}resetGame(){this.httpClient.get("/assets/games/wordle/dictionary.txt",{responseType:"text"}).pipe((0,_.R)(this.tearDown$)).subscribe(e=>{this.wordleService.reset({dictionary:e.split(/\r?\n/),rowsNumber:this.rowsNumber,columnsNumber:this.columnsNumber})})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(S.eN),t.Y36(f))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-wordle"]],hostBindings:function(e,s){1&e&&t.NdJ("keydown",function(n){return s.handleKeyboardEvent(n)},!1,t.evT)},standalone:!0,features:[t._Bn([f]),t.jDz],decls:5,vars:8,consts:[[1,"grid"],["class","grid__row",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"grid__row"],["class","grid__cell",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid__cell",3,"ngClass"],["class","game-status game-status__victory",4,"ngIf"],["class","game-status game-status__defeat",4,"ngIf"],[1,"game-status","game-status__victory"],[1,"game-status","game-status__defeat"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.NdJ("@gridError.done",function(){return s.resetOperationStatus()}),t.YNc(1,v,2,2,"div",1),t.ALo(2,"async"),t.qZA(),t.YNc(3,w,3,2,"ng-container",2),t.ALo(4,"async")),2&e&&(t.Q6J("@gridError",!s.isOperationSuccessful),t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,4,s.cells$))("ngForTrackBy",s.trackByIndex),t.xp6(2),t.Q6J("ngIf",t.lcZ(4,6,s.gameStatus$)))},dependencies:[h.ax,h.O5,h.mk,h.Ov],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;width:100%;position:relative}.grid[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.grid__row[_ngcontent-%COMP%]{display:flex;margin-bottom:4px}.grid__row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.grid__cell[_ngcontent-%COMP%]{display:flex;width:56px;height:56px;justify-content:center;align-items:center;font-size:24px;font-weight:700;border:solid 1px lightgrey;margin-right:4px;text-transform:capitalize}.grid__cell[_ngcontent-%COMP%]:last-child{margin-right:0}.grid__cell--incorrect-letter[_ngcontent-%COMP%]{background-color:gray;color:#fff}.grid__cell--correct-letter[_ngcontent-%COMP%]{background-color:orange;color:#fff}.grid__cell--correct-letter-and-position[_ngcontent-%COMP%]{background-color:green;color:#fff}.game-status[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center;font-size:48px;top:152px;pointer-events:none;background-color:#fffc}.game-status__victory[_ngcontent-%COMP%]{color:green}.game-status__defeat[_ngcontent-%COMP%]{color:red}"],data:{animation:[(0,l.X$)("gridError",[(0,l.SB)("true",(0,l.oB)({backgroundColor:"red"})),(0,l.SB)("false",(0,l.oB)({backgroundColor:"white"})),(0,l.eR)("true => false",(0,l.jt)(150))])]},changeDetection:0}),r})()}}]);